<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 12 Fixed effects and clustered standard errors | Tidy Finance with R</title>
<meta name="author" content="Christoph Scheuch (wikifolio Financial Technologies) and Stefan Voigt (University of Copenhagen and Danish Finance Institute) and Patrick Weiss (Reykjavik University and Vienna University of Economics and Business)">
<meta name="description" content="In this chapter, we provide an intuitive introduction to the two popular concepts of fixed effects regressions and clustered standard errors. When working with regressions in empirical finance,...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 12 Fixed effects and clustered standard errors | Tidy Finance with R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://www.tidy-finance.org/fixed-effects-and-clustered-standard-errors.html">
<meta property="og:image" content="https://www.tidy-finance.org/cover_homepage.jpg">
<meta property="og:description" content="In this chapter, we provide an intuitive introduction to the two popular concepts of fixed effects regressions and clustered standard errors. When working with regressions in empirical finance,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 12 Fixed effects and clustered standard errors | Tidy Finance with R">
<meta name="twitter:description" content="In this chapter, we provide an intuitive introduction to the two popular concepts of fixed effects regressions and clustered standard errors. When working with regressions in empirical finance,...">
<meta name="twitter:image" content="https://www.tidy-finance.org/cover_homepage.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="71793ca0-15ca-4735-a61b-2a3e7a26a7b9" data-blockingmode="auto" type="text/javascript"></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-DH3KZSMJ5W"></script><script data-cookieconsent="ignore">
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('consent', 'default', {ad_storage:'denied',analytics_storage:'denied'});
      gtag("set", "ads_data_redaction", true);
      gtag('js', new Date());
      gtag('config', 'G-DH3KZSMJ5W');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Tidy Finance with R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li class="book-part">Getting started</li>
<li><a class="" href="introduction-to-tidy-finance.html"><span class="header-section-number">1</span> Introduction to Tidy Finance</a></li>
<li class="book-part">Financial data</li>
<li><a class="" href="accessing-managing-financial-data.html"><span class="header-section-number">2</span> Accessing &amp; managing financial data</a></li>
<li><a class="" href="wrds-crsp-and-compustat.html"><span class="header-section-number">3</span> WRDS, CRSP, and Compustat</a></li>
<li><a class="" href="trace-and-fisd.html"><span class="header-section-number">4</span> TRACE and FISD</a></li>
<li><a class="" href="other-data-providers.html"><span class="header-section-number">5</span> Other data providers</a></li>
<li class="book-part">Asset pricing</li>
<li><a class="" href="beta-estimation.html"><span class="header-section-number">6</span> Beta estimation</a></li>
<li><a class="" href="univariate-portfolio-sorts.html"><span class="header-section-number">7</span> Univariate portfolio sorts</a></li>
<li><a class="" href="size-sorts-and-p-hacking.html"><span class="header-section-number">8</span> Size sorts and p-hacking</a></li>
<li><a class="" href="value-and-bivariate-sorts.html"><span class="header-section-number">9</span> Value and bivariate sorts</a></li>
<li><a class="" href="replicating-fama-and-french-factors.html"><span class="header-section-number">10</span> Replicating Fama and French factors</a></li>
<li><a class="" href="fama-macbeth-regressions.html"><span class="header-section-number">11</span> Fama-MacBeth regressions</a></li>
<li class="book-part">Modeling &amp; machine learning</li>
<li><a class="active" href="fixed-effects-and-clustered-standard-errors.html"><span class="header-section-number">12</span> Fixed effects and clustered standard errors</a></li>
<li><a class="" href="difference-in-differences.html"><span class="header-section-number">13</span> Difference in differences</a></li>
<li><a class="" href="factor-selection-via-machine-learning.html"><span class="header-section-number">14</span> Factor selection via machine learning</a></li>
<li><a class="" href="option-pricing-via-machine-learning.html"><span class="header-section-number">15</span> Option pricing via machine learning</a></li>
<li class="book-part">Portfolio optimization</li>
<li><a class="" href="parametric-portfolio-policies.html"><span class="header-section-number">16</span> Parametric portfolio policies</a></li>
<li><a class="" href="constrained-optimization-and-backtesting.html"><span class="header-section-number">17</span> Constrained optimization and backtesting</a></li>
<li class="book-part">References</li>
<li><a class="" href="references.html">References</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="cover-design.html"><span class="header-section-number">A</span> Cover design</a></li>
<li><a class="" href="clean-enhanced-trace-with-r.html"><span class="header-section-number">B</span> Clean enhanced TRACE with R</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/voigtstefan/tidy_finance">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="fixed-effects-and-clustered-standard-errors" class="section level1" number="12">
<h1>
<span class="header-section-number">12</span> Fixed effects and clustered standard errors<a class="anchor" aria-label="anchor" href="#fixed-effects-and-clustered-standard-errors"><i class="fas fa-link"></i></a>
</h1>
<p>In this chapter, we provide an intuitive introduction to the two popular concepts of <em>fixed effects regressions</em> and <em>clustered standard errors</em>. When working with regressions in empirical finance, you will sooner or later be confronted with discussions around how you deal with omitted variables bias and dependence in your residuals. The concepts we introduce in this chapter are designed to address such concerns.</p>
<p>We focus on a classical panel regression common to the corporate finance literature <span class="citation">(e.g., <a href="references.html#ref-Fazzari1988" role="doc-biblioref">Fazzari et al. 1988</a>; <a href="references.html#ref-Erickson2012" role="doc-biblioref">Erickson and Whited 2012</a>; <a href="references.html#ref-Gulen2015" role="doc-biblioref">Gulen and Ion 2015</a>)</span>: firm investment modeled as a function that increases in firm cash flow and firm investment opportunities.</p>
<p>Typically, this investment regression uses quarterly balance sheet data provided via Compustat because it allows for richer dynamics in the regressors and more opportunities to construct variables. As we focus on the implementation of fixed effects and clustered standard errors, we use the annual Compustat data from our previous chapters and leave the estimation using quarterly data as an exercise. We demonstrate below that the regression based on annual data yields qualitatively similar results to estimations based on quarterly data from the literature, namely confirming the positive relationships between investment and the two regressors.</p>
<p>The current chapter relies on the following set of packages.</p>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rsqlite.r-dbi.org">RSQLite</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lrberge.github.io/fixest/">fixest</a></span><span class="op">)</span></span></code></pre></div>
<p>Compared to previous chapters, we introduce <code>fixest</code> <span class="citation">(<a href="references.html#ref-fixest" role="doc-biblioref">Bergé 2018</a>)</span> for the fixed effects regressions, the implementation of standard error clusters, and tidy estimation output.</p>
<div id="data-preparation-5" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> Data preparation<a class="anchor" aria-label="anchor" href="#data-preparation-5"><i class="fas fa-link"></i></a>
</h2>
<p>We use CRSP and annual Compustat as data sources from our <code>SQLite</code>-database introduced in Chapters 2-4. In particular, Compustat provides balance sheet and income statement data on a firm level, while CRSP provides market valuations. </p>
<div class="sourceCode" id="cb203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_finance</span> <span class="op">&lt;-</span> <span class="fu">dbConnect</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html">SQLite</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="st">"data/tidy_finance.sqlite"</span>,</span>
<span>  extended_types <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">crsp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html">tbl</a></span><span class="op">(</span><span class="va">tidy_finance</span>, <span class="st">"crsp_monthly"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">collect</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">compustat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html">tbl</a></span><span class="op">(</span><span class="va">tidy_finance</span>, <span class="st">"compustat"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html">collect</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The classical investment regressions model the capital investment of a firm as a function of operating cash flows and Tobin’s q, a measure of a firm’s investment opportunities. We start by constructing investment and cash flows which are usually normalized by lagged total assets of a firm. In the following code chunk, we construct a <em>panel</em> of firm-year observations, so we have both cross-sectional information on firms as well as time-series information for each firm.</p>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_investment</span> <span class="op">&lt;-</span> <span class="va">compustat</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>month <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html">floor_date</a></span><span class="op">(</span><span class="va">datadate</span>, <span class="st">"month"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">compustat</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gvkey</span>, <span class="va">year</span>, at_lag <span class="op">=</span> <span class="va">at</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">year</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gvkey"</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">at</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="va">at_lag</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    investment <span class="op">=</span> <span class="va">capx</span> <span class="op">/</span> <span class="va">at_lag</span>,</span>
<span>    cash_flows <span class="op">=</span> <span class="va">oancf</span> <span class="op">/</span> <span class="va">at_lag</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">data_investment</span> <span class="op">&lt;-</span> <span class="va">data_investment</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">data_investment</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gvkey</span>, <span class="va">year</span>, investment_lead <span class="op">=</span> <span class="va">investment</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">year</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gvkey"</span>, <span class="st">"year"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Tobin’s q is the ratio of the market value of capital to its replacement costs. It is one of the most common regressors in corporate finance applications <span class="citation">(e.g., <a href="references.html#ref-Fazzari1988" role="doc-biblioref">Fazzari et al. 1988</a>; <a href="references.html#ref-Erickson2012" role="doc-biblioref">Erickson and Whited 2012</a>)</span>. We follow the implementation of <span class="citation">Gulen and Ion (<a href="references.html#ref-Gulen2015" role="doc-biblioref">2015</a>)</span> and compute Tobin’s q as the market value of equity (<code>mktcap</code>) plus the book value of assets (<code>at</code>) minus book value of equity (<code>be</code>) plus deferred taxes (<code>txdb</code>), all divided by book value of assets (<code>at</code>). Finally, we only keep observations where all variables of interest are non-missing, and the reported book value of assets is strictly positive.</p>
<div class="sourceCode" id="cb205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_investment</span> <span class="op">&lt;-</span> <span class="va">data_investment</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">crsp</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gvkey</span>, <span class="va">month</span>, <span class="va">mktcap</span><span class="op">)</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gvkey"</span>, <span class="st">"month"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>tobins_q <span class="op">=</span> <span class="op">(</span><span class="va">mktcap</span> <span class="op">+</span> <span class="va">at</span> <span class="op">-</span> <span class="va">be</span> <span class="op">+</span> <span class="va">txdb</span><span class="op">)</span> <span class="op">/</span> <span class="va">at</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_investment</span> <span class="op">&lt;-</span> <span class="va">data_investment</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">gvkey</span>, <span class="va">year</span>, <span class="va">investment_lead</span>, <span class="va">cash_flows</span>, <span class="va">tobins_q</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>As the variable construction typically leads to extreme values that are most likely related to data issues (e.g., reporting errors), many papers include winsorization of the variables of interest. Winsorization involves replacing values of extreme outliers with quantiles on the respective end. The following function implements the winsorization for any percentage cut that should be applied on either end of the distributions. In the specific example, we winsorize the main variables (<code>investment</code>, <code>cash_flows</code>, and <code>tobins_q</code>) at the 1 percent level.</p>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">winsorize</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">cut</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html">replace</a></span><span class="op">(</span></span>
<span>    <span class="va">x</span>,</span>
<span>    <span class="va">x</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span> <span class="op">-</span> <span class="va">cut</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">1</span> <span class="op">-</span> <span class="va">cut</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/replace.html">replace</a></span><span class="op">(</span></span>
<span>    <span class="va">x</span>,</span>
<span>    <span class="va">x</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cut</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">cut</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">data_investment</span> <span class="op">&lt;-</span> <span class="va">data_investment</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">investment_lead</span>, <span class="va">cash_flows</span>, <span class="va">tobins_q</span><span class="op">)</span>,</span>
<span>    <span class="op">~</span> <span class="fu">winsorize</span><span class="op">(</span><span class="va">.</span>, <span class="fl">0.01</span><span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Before proceeding to any estimations, we highly recommend tabulating summary statistics of the variables that enter the regression. These simple tables allow you to check the plausibility of your numerical variables, as well as spot any obvious errors or outliers. Additionally, for panel data, plotting the time series of the variable’s mean and the number of observations is a useful exercise to spot potential problems.</p>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_investment</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">investment_lead</span>, <span class="va">cash_flows</span>, <span class="va">tobins_q</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"measure"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">measure</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>    min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>    q05 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">value</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>    q50 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">value</span>, <span class="fl">0.50</span><span class="op">)</span>,</span>
<span>    q95 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">value</span>, <span class="fl">0.95</span><span class="op">)</span>,</span>
<span>    max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<pre><code># A tibble: 3 × 9
  measure      mean     sd    min      q05    q50   q95    max      n
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;int&gt;
1 cash_flows 0.0145 0.266  -1.50  -4.57e-1 0.0649 0.273  0.480 124179
2 investmen… 0.0584 0.0778  0      7.27e-4 0.0333 0.208  0.467 124179
3 tobins_q   1.99   1.69    0.571  7.92e-1 1.38   5.33  10.9   124179</code></pre>
</div>
<div id="fixed-effects" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> Fixed effects<a class="anchor" aria-label="anchor" href="#fixed-effects"><i class="fas fa-link"></i></a>
</h2>
<p>To illustrate fixed effects regressions, we use the <code>fixest</code> package, which is both computationally powerful and flexible with respect to model specifications. We start out with the basic investment regression using the simple model
<span class="math display">\[ \text{Investment}_{i,t+1} = \alpha + \beta_1\text{Cash Flows}_{i,t}+\beta_2\text{Tobin's q}_{i,t}+\varepsilon_{i,t},\]</span>
where <span class="math inline">\(\varepsilon_t\)</span> is i.i.d. normally distributed across time and firms. We use the <code><a href="https://lrberge.github.io/fixest/reference/feols.html">feols()</a></code>-function to estimate the simple model so that the output has the same structure as the other regressions below, but you could also use <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code>.</p>
<div class="sourceCode" id="cb209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_ols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  fml <span class="op">=</span> <span class="va">investment_lead</span> <span class="op">~</span> <span class="va">cash_flows</span> <span class="op">+</span> <span class="va">tobins_q</span>,</span>
<span>  se <span class="op">=</span> <span class="st">"iid"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data_investment</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model_ols</span></span></code></pre></div>
<pre><code>OLS estimation, Dep. Var.: investment_lead
Observations: 124,179 
Standard-errors: IID 
            Estimate Std. Error t value  Pr(&gt;|t|)    
(Intercept)  0.04243   0.000342   124.1 &lt; 2.2e-16 ***
cash_flows   0.05143   0.000835    61.6 &lt; 2.2e-16 ***
tobins_q     0.00767   0.000132    58.2 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 0.076041   Adj. R2: 0.044436</code></pre>
<p>As expected, the regression output shows significant coefficients for both variables. Higher cash flows and investment opportunities are associated with higher investment. However, the simple model actually may have a lot of omitted variables, so our coefficients are most likely biased. As there is a lot of unexplained variation in our simple model (indicated by the rather low adjusted R-squared), the bias in our coefficients is potentially severe, and the true values could be above or below zero. Note that there are no clear cutoffs to decide when an R-squared is high or low, but it depends on the context of your application and on the comparison of different models for the same data.</p>
<p>One way to tackle the issue of omitted variable bias is to get rid of as much unexplained variation as possible by including <em>fixed effects</em> - i.e., model parameters that are fixed for specific groups <span class="citation">(e.g., <a href="references.html#ref-Wooldridge2010" role="doc-biblioref">Wooldridge 2010</a>)</span>. In essence, each group has its own mean in fixed effects regressions. The simplest group that we can form in the investment regression is the firm level. The firm fixed effects regression is then
<span class="math display">\[ \text{Investment}_{i,t+1} = \alpha_i + \beta_1\text{Cash Flows}_{i,t}+\beta_2\text{Tobin's q}_{i,t}+\varepsilon_{i,t},\]</span>
where <span class="math inline">\(\alpha_i\)</span> is the firm fixed effect and captures the firm-specific mean investment across all years. In fact, you could also compute firms’ investments as deviations from the firms’ average investments and estimate the model without the fixed effects. The idea of the firm fixed effect is to remove the firm’s average investment, which might be affected by firm-specific variables that you do not observe. For example, firms in a specific industry might invest more on average. Or you observe a young firm with large investments but only small concurrent cash flows, which will only happen in a few years. This sort of variation is unwanted because it is related to unobserved variables that can bias your estimates in any direction.</p>
<p>To include the firm fixed effect, we use <code>gvkey</code> (Compustat’s firm identifier) as follows:</p>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_fe_firm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  <span class="va">investment_lead</span> <span class="op">~</span> <span class="va">cash_flows</span> <span class="op">+</span> <span class="va">tobins_q</span> <span class="op">|</span> <span class="va">gvkey</span>,</span>
<span>  se <span class="op">=</span> <span class="st">"iid"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data_investment</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model_fe_firm</span></span></code></pre></div>
<pre><code>OLS estimation, Dep. Var.: investment_lead
Observations: 124,179 
Fixed-effects: gvkey: 13,899
Standard-errors: IID 
           Estimate Std. Error t value  Pr(&gt;|t|)    
cash_flows   0.0146   0.000963    15.1 &lt; 2.2e-16 ***
tobins_q     0.0113   0.000136    82.6 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 0.05008     Adj. R2: 0.533298
                Within R2: 0.059424</code></pre>
<p>The regression output shows a lot of unexplained variation at the firm level that is taken care of by including the firm fixed effect as the adjusted R-squared rises above 50%. In fact, it is more interesting to look at the within R-squared that shows the explanatory power of a firm’s cash flow and Tobin’s q <em>on top</em> of the average investment of each firm. We can also see that the coefficients changed slightly in magnitude but not in sign.</p>
<p>There is another source of variation that we can get rid of in our setting: average investment across firms might vary over time due to macroeconomic factors that affect all firms, such as economic crises. By including year fixed effects, we can take out the effect of unobservables that vary over time. The two-way fixed effects regression is then
<span class="math display">\[ \text{Investment}_{i,t+1} = \alpha_i + \alpha_t + \beta_1\text{Cash Flows}_{i,t}+\beta_2\text{Tobin's q}_{i,t}+\varepsilon_{i,t},\]</span>
where <span class="math inline">\(\alpha_t\)</span> is the time fixed effect. Here you can think of higher investments during an economic expansion with simultaneously high cash flows.</p>
<div class="sourceCode" id="cb213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_fe_firmyear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  <span class="va">investment_lead</span> <span class="op">~</span> <span class="va">cash_flows</span> <span class="op">+</span> <span class="va">tobins_q</span> <span class="op">|</span> <span class="va">gvkey</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>  se <span class="op">=</span> <span class="st">"iid"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data_investment</span></span>
<span><span class="op">)</span></span>
<span><span class="va">model_fe_firmyear</span></span></code></pre></div>
<pre><code>OLS estimation, Dep. Var.: investment_lead
Observations: 124,179 
Fixed-effects: gvkey: 13,899,  year: 34
Standard-errors: IID 
           Estimate Std. Error t value  Pr(&gt;|t|)    
cash_flows   0.0182   0.000941    19.3 &lt; 2.2e-16 ***
tobins_q     0.0102   0.000135    75.5 &lt; 2.2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
RMSE: 0.048805     Adj. R2: 0.556615
                 Within R2: 0.051545</code></pre>
<p>The inclusion of time fixed effects did only marginally affect the R-squared and the coefficients, which we can interpret as a good thing as it indicates that the coefficients are not driven by an omitted variable that varies over time.</p>
<p>How can we further improve the robustness of our regression results? Ideally, we want to get rid of unexplained variation at the firm-year level, which means we need to include more variables that vary across firm <em>and</em> time and are likely correlated with investment. Note that we cannot include firm-year fixed effects in our setting because then cash flows and Tobin’s q are colinear with the fixed effects, and the estimation becomes void.</p>
<p>Before we discuss the properties of our estimation errors, we want to point out that regression tables are at the heart of every empirical analysis where you compare multiple models. Fortunately, the <code><a href="https://lrberge.github.io/fixest/reference/etable.html">etable()</a></code> provides a convenient way to tabulate the regression output (with many parameters to customize and even print the output in LaTeX). We recommend printing <span class="math inline">\(t\)</span>-statistics rather than standard errors in regression tables because the latter are typically very hard to interpret across coefficients that vary in size. We also do not print p-values because they are sometimes misinterpreted to signal the importance of observed effects <span class="citation">(<a href="references.html#ref-Wasserstein2016" role="doc-biblioref">Wasserstein and Lazar 2016</a>)</span>. The <span class="math inline">\(t\)</span>-statistics provide a consistent way to interpret changes in estimation uncertainty across different model specifications.</p>
<div class="sourceCode" id="cb215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lrberge.github.io/fixest/reference/etable.html">etable</a></span><span class="op">(</span><span class="va">model_ols</span>, <span class="va">model_fe_firm</span>, <span class="va">model_fe_firmyear</span>,</span>
<span>  coefstat <span class="op">=</span> <span class="st">"tstat"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>                        model_ols     model_fe_firm
Dependent Var.:   investment_lead   investment_lead
                                                   
(Intercept)     0.0424*** (124.1)                  
cash_flows      0.0514*** (61.56) 0.0146*** (15.14)
tobins_q        0.0077*** (58.17) 0.0113*** (82.60)
Fixed-Effects:  ----------------- -----------------
gvkey                          No               Yes
year                           No                No
_______________ _________________ _________________
VCOV type                     IID               IID
Observations              124,179           124,179
R2                        0.04445           0.58554
Within R2                      --           0.05942

                model_fe_firmyear
Dependent Var.:   investment_lead
                                 
(Intercept)                      
cash_flows      0.0182*** (19.30)
tobins_q        0.0102*** (75.51)
Fixed-Effects:  -----------------
gvkey                         Yes
year                          Yes
_______________ _________________
VCOV type                     IID
Observations              124,179
R2                        0.60636
Within R2                 0.05155
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div id="clustering-standard-errors" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> Clustering standard errors<a class="anchor" aria-label="anchor" href="#clustering-standard-errors"><i class="fas fa-link"></i></a>
</h2>
<p>Apart from biased estimators, we usually have to deal with potentially complex dependencies of our residuals with each other. Such dependencies in the residuals invalidate the i.i.d. assumption of OLS and lead to biased standard errors. With biased OLS standard errors, we cannot reliably interpret the statistical significance of our estimated coefficients.</p>
<p>In our setting, the residuals may be correlated across years for a given firm (time-series dependence), or, alternatively, the residuals may be correlated across different firms (cross-section dependence). One of the most common approaches to dealing with such dependence is the use of <em>clustered standard errors</em> <span class="citation">(<a href="references.html#ref-Petersen2008" role="doc-biblioref">Petersen 2008</a>)</span>. The idea behind clustering is that the correlation of residuals <em>within</em> a cluster can be of any form. As the number of clusters grows, the cluster-robust standard errors become consistent <span class="citation">(<a href="references.html#ref-Lang2007" role="doc-biblioref">Donald and Lang 2007</a>; <a href="references.html#ref-Wooldridge2010" role="doc-biblioref">Wooldridge 2010</a>)</span>. A natural requirement for clustering standard errors in practice is hence a sufficiently large number of clusters. Typically, around at least 30 to 50 clusters are seen as sufficient <span class="citation">(<a href="references.html#ref-Cameron2011" role="doc-biblioref">Cameron, Gelbach, and Miller 2011</a>)</span>.</p>
<p>Instead of relying on the iid assumption, we can use the cluster option in the <code>feols</code>-function as above. The code chunk below applies both one-way clustering by firm as well as two-way clustering by firm and year.</p>
<div class="sourceCode" id="cb217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_cluster_firm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  <span class="va">investment_lead</span> <span class="op">~</span> <span class="va">cash_flows</span> <span class="op">+</span> <span class="va">tobins_q</span> <span class="op">|</span> <span class="va">gvkey</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>  cluster <span class="op">=</span> <span class="st">"gvkey"</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data_investment</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_cluster_firmyear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html">feols</a></span><span class="op">(</span></span>
<span>  <span class="va">investment_lead</span> <span class="op">~</span> <span class="va">cash_flows</span> <span class="op">+</span> <span class="va">tobins_q</span> <span class="op">|</span> <span class="va">gvkey</span> <span class="op">+</span> <span class="va">year</span>,</span>
<span>  cluster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gvkey"</span>, <span class="st">"year"</span><span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data_investment</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>
The table below shows the comparison of the different assumptions behind the standard errors. In the first column, we can see highly significant coefficients on both cash flows and Tobin’s q. By clustering the standard errors on the firm level, the <span class="math inline">\(t\)</span>-statistics of both coefficients drop in half, indicating a high correlation of residuals within firms. If we additionally cluster by year, we see a drop, particularly for Tobin’s q, again. Even after relaxing the assumptions behind our standard errors, both coefficients are still comfortably significant as the <span class="math inline">\(t\)</span> statistics are well above the usual critical values of 1.96 or 2.576 for two-tailed significance tests.</p>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lrberge.github.io/fixest/reference/etable.html">etable</a></span><span class="op">(</span><span class="va">model_fe_firmyear</span>, <span class="va">model_cluster_firm</span>, <span class="va">model_cluster_firmyear</span>,</span>
<span>  coefstat <span class="op">=</span> <span class="st">"tstat"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>                model_fe_firmyear model_cluster_f..
Dependent Var.:   investment_lead   investment_lead
                                                   
cash_flows      0.0182*** (19.30) 0.0182*** (11.18)
tobins_q        0.0102*** (75.51) 0.0102*** (35.63)
Fixed-Effects:  ----------------- -----------------
gvkey                         Yes               Yes
year                          Yes               Yes
_______________ _________________ _________________
VCOV type                     IID         by: gvkey
Observations              124,179           124,179
R2                        0.60636           0.60636
Within R2                 0.05155           0.05155

                model_cluster_f..
Dependent Var.:   investment_lead
                                 
cash_flows      0.0182*** (9.459)
tobins_q        0.0102*** (16.36)
Fixed-Effects:  -----------------
gvkey                         Yes
year                          Yes
_______________ _________________
VCOV type        by: gvkey &amp; year
Observations              124,179
R2                        0.60636
Within R2                 0.05155
---
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>Inspired by <span class="citation">Abadie et al. (<a href="references.html#ref-AbadieEtAl2017" role="doc-biblioref">2017</a>)</span>, we want to close this chapter by highlighting that choosing the right dimensions for clustering is a design problem. Even if the data is informative about whether clustering matters for standard errors, they do not tell you whether you should adjust the standard errors for clustering. Clustering at too aggregate levels can hence lead to unnecessarily inflated standard errors.</p>
</div>
<div id="exercises-11" class="section level2" number="12.4">
<h2>
<span class="header-section-number">12.4</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-11"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Estimate the two-way fixed effects model with two-way clustered standard errors using quarterly Compustat data from WRDS. Note that you can access quarterly data via <code>tbl(wrds, in_schema("comp", "fundq"))</code>.</li>
<li>Following <span class="citation">Peters and Taylor (<a href="references.html#ref-Peters2017" role="doc-biblioref">2017</a>)</span>, compute Tobin’s q as the market value of outstanding equity <code>mktcap</code> plus the book value of debt (<code>dltt</code> + <code>dlc</code>) minus the current assets <code>atc</code> and everything divided by the book value of property, plant and equipment <code>ppegt</code>. What is the correlation between the measures of Tobin’s q? What is the impact on the two-way fixed effects regressions?</li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="fama-macbeth-regressions.html"><span class="header-section-number">11</span> Fama-MacBeth regressions</a></div>
<div class="next"><a href="difference-in-differences.html"><span class="header-section-number">13</span> Difference in differences</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#fixed-effects-and-clustered-standard-errors"><span class="header-section-number">12</span> Fixed effects and clustered standard errors</a></li>
<li><a class="nav-link" href="#data-preparation-5"><span class="header-section-number">12.1</span> Data preparation</a></li>
<li><a class="nav-link" href="#fixed-effects"><span class="header-section-number">12.2</span> Fixed effects</a></li>
<li><a class="nav-link" href="#clustering-standard-errors"><span class="header-section-number">12.3</span> Clustering standard errors</a></li>
<li><a class="nav-link" href="#exercises-11"><span class="header-section-number">12.4</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/voigtstefan/tidy_finance/blob/main/40_fixed_effects_and_clustering.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/voigtstefan/tidy_finance/edit/main/40_fixed_effects_and_clustering.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Tidy Finance with R</strong>" was written by Christoph Scheuch (wikifolio Financial Technologies) and Stefan Voigt (University of Copenhagen and Danish Finance Institute) and Patrick Weiss (Reykjavik University and Vienna University of Economics and Business). It was last built on 2022-10-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
